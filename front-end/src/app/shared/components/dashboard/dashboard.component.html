<section id="dashboard">
    <div id="main">
      <header>
        <div class="brand">
          <img src="assets/logo.png" alt="Logo">
          <h2>Nimbus</h2>
        </div>
        <nav>
          <span>Overview</span>
          <a routerLink="/dashboard" routerLinkActive="active"><i class="fa-solid fa-house"></i> Home</a>
          <a routerLink="absences" ><i class="fa-solid fa-school"></i> Absences</a>
          <a routerLink="reports" routerLinkActive="active"><i class="fa-solid fa-triangle-exclamation"></i> Reports</a>
          <a routerLink="notifications"><i class="fa-solid fa-inbox"></i> Inbox</a>
          <a routerLink="stats"><i class="fa-solid fa-chart-simple"></i> Statistics</a>
        </nav>
        <div class="settings">
          <span>Settings</span>
          <a routerLink="/settings" routerLinkActive="active"><i class="fa-solid fa-gear"></i> Setting</a>
          <a routerLink="#" (click)="logout()" class="logout"><i class="fa-solid fa-right-from-bracket"></i> LogOut</a>
        </div>

        <div class="premium">
            <span>NEW</span>
            <h4>We have added new school tools!</h4>
            <button>Upgrade Now</button>
        </div>
      </header>
      <main>
        <div *ngIf="isAdmin" class="admin-dashboard">
          <h2>Admin</h2>
            <div class="stats-row">
              <app-stat-card
                title="Total Students"
                [value]="dashboardData?.totalStudents || 0"
                icon="school"
                color="#3f51b5">
              </app-stat-card>

              <app-stat-card
                title="Active Routes"
                [value]="dashboardData?.totalRoutes || 0"
                icon="map"
                color="#4caf50">
              </app-stat-card>

              <app-stat-card
                title="Active Trips"
                [value]="dashboardData?.inProgressTrips || 0"
                icon="directions_bus"
                color="#ff9800">
              </app-stat-card>

              <app-stat-card
                title="Attendance Rate"
                [value]="dashboardData?.attendanceRate || 0"
                icon="check_circle"
                color="#f44336"
                suffix="%">
              </app-stat-card>
            </div>

            <div class="dashboard-row">
              <div class="dashboard-card">
                <mat-card>
                  <mat-card-header>
                    <mat-card-title>Active Trips</mat-card-title>
                  </mat-card-header>
                  <mat-card-content>
                    <div *ngIf="dashboardData?.activeTrips?.length === 0" class="empty-state">
                      <mat-icon>directions_bus_filled</mat-icon>
                      <p>No active trips at the moment</p>
                    </div>
                    <div *ngIf="dashboardData?.activeTrips?.length > 0" class="trips-list">
                      <app-trip-card
                        *ngFor="let trip of dashboardData.activeTrips"
                        [trip]="trip">
                      </app-trip-card>
                    </div>
                  </mat-card-content>
                </mat-card>
              </div>

              <div class="dashboard-card">
                <mat-card>
                  <mat-card-header>
                    <mat-card-title>Recent Activity</mat-card-title>
                  </mat-card-header>
                  <mat-card-content>
                    <mat-list>
                      <mat-list-item *ngFor="let activity of dashboardData?.recentActivities">
                        <mat-icon matListItemIcon>{{ activity.icon }}</mat-icon>
                        <div matListItemTitle>{{ activity.title }}</div>
                        <div matListItemLine>{{ activity.timestamp | date:'medium' }}</div>
                      </mat-list-item>
                    </mat-list>
                  </mat-card-content>
                </mat-card>
              </div>
            </div>
          </div>
      </main>
    </div>
  </section>
